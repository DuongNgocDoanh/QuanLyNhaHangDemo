@model IEnumerable<QuanLyNhaHangDemo.Models.CompletedOrderViewModel>

@{
    ViewData["Title"] = "Đơn hàng hoàn thành";
}

<h3>Đơn hàng hoàn thành</h3>

<form method="get" class="row g-3 mb-3">
    <div class="col-auto">
        <label class="form-label">Từ ngày</label>
        <input type="date" name="from"
               class="form-control"
               value="@(ViewBag.From != null ? ((DateTime)ViewBag.From).ToString("yyyy-MM-dd") : "")" />
    </div>
    <div class="col-auto">
        <label class="form-label">Đến ngày</label>
        <input type="date" name="to"
               class="form-control"
               value="@(ViewBag.To != null ? ((DateTime)ViewBag.To).ToString("yyyy-MM-dd") : "")" />
    </div>
    <div class="col-auto" style="margin-top:32px">
        <button type="submit" class="btn btn-primary">Lọc</button>
    </div>
</form>


<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Order Code</th>
            <th>User Name</th>
            <th>Ngày tạo</th>
            <th>Doanh thu (món)</th>
            <th>Phí ship</th>
            <th>Tổng (món + ship)</th>
            <th>In hóa đơn</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var o in Model)
        {
            <tr>
                <td>@o.OrderCode</td>
                <td>@o.UserName</td>
                <td>@o.CreatedDate.ToString("dd/MM/yyyy HH:mm")</td>
                <td>@o.OrderRevenue.ToString("#,##0 đ")</td>
                <td>@o.ShippingCost.ToString("#,##0 đ")</td>
                <td>@o.TotalWithShipping.ToString("#,##0 đ")</td>
                <td>
                    <a class="btn btn-secondary"
                       href="/Admin/Order/Invoice?ordercode=@o.OrderCode"
                       target="_blank">
                        In hóa đơn
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>

<div class="mt-3">
    <h5>Tổng doanh thu (chỉ tiền món): @(((decimal)ViewBag.TotalRevenue).ToString("#,##0 đ"))</h5>
    <h5>Tổng doanh thu (món + ship): @(((decimal)ViewBag.TotalRevenueWithShipping).ToString("#,##0 đ"))</h5>
</div>
