@using QuanLyNhaHangDemo.Models
@model IEnumerable<TableModel>

@{
    ViewData["Title"] = "Sơ đồ bàn (TEST)";
}

<h2>Sơ đồ bàn</h2>

<div class="row">
    @foreach (var t in Model)
    {
        <div class="col-sm-4">
            <div class="card" style="border:1px solid #ccc; padding:15px; margin-bottom:15px;">

                <h3>@t.TableName</h3>

                <p>
                    Trạng thái:
                    @if (t.Status == TableStatus.Empty)
                    {
                        <span class="text-success">Trống</span>
                    }
                    else if (t.Status == TableStatus.Serving)
                    {
                        <span class="text-danger">Đang sử dụng</span>
                    }
                    else
                    {
                        <span class="text-warning">Đã đặt trước</span>
                    }
                </p>

                <p>Order hiện tại: @(string.IsNullOrEmpty(t.CurrentOrderCode) ? "-" : t.CurrentOrderCode)</p>

                <a class="btn btn-primary btn-sm"
                   asp-controller="Table"
                   asp-action="Choose"
                   asp-route-tableId="@t.Id">
                    Đặt món
                </a>

                <!-- Nút ĐẶT BÀN: gọi ReservationController.Create -->
                <a class="btn btn-warning btn-sm"
                   asp-controller="Reservation"
                   asp-action="Create"
                   asp-route-tableId="@t.Id">
                    Đặt bàn
                </a>

                <a class="btn btn-sm btn-warning"
                   asp-controller="Table"
                   asp-action="ViewOrderAtTable"
                   asp-route-tableId="@t.Id">
                    Xem order bàn
                </a>


            </div>
        </div>
    }
</div>
